<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>command/Command.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Bot.html">Bot</a><ul class='methods'><li data-type='method'><a href="Bot.html#defaultSettingExists">defaultSettingExists</a></li><li data-type='method'><a href="Bot.html#getPrefix">getPrefix</a></li><li data-type='method'><a href="Bot.html#setDefaultSetting">setDefaultSetting</a></li><li data-type='method'><a href="Bot.html#start">start</a></li></ul></li><li><a href="Command.html">Command</a><ul class='methods'><li data-type='method'><a href="Command.html#action">action</a></li><li data-type='method'><a href="Command.html#register">register</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">command/Command.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use babel';
'use strict';

/**
 * Command class to extend to create commands users can execute
 * @class Command
 * @param {Bot} bot - {@link Bot} instance
 * @param {CommandInfo} info - [CommandInfo]{@link Command.CommandInfo} object containing required command properties
 */
export default class Command
{
	constructor(bot, info = null)
	{
		// Assert necessary command information
		let name = this.constructor.name;
		if (!info) throw new Error(`You must provide an info object for command: ${name}`);
		if (!info.name) throw new Error(`You must provide a name for command: ${name}`);
		if (!info.description) throw new Error(`You must provide a description for command: ${name}`);
		if (!info.usage) throw new Error(`You must provide usage information for command: ${name}`);
		if (!info.group) throw new Error(`You must provide a group for command: ${name}`);
		if (info.aliases &amp;&amp; !Array.isArray(info.aliases)) throw new Error(`Aliases for command ${name} must be an array`);
		if (info.permissions &amp;&amp; !Array.isArray(info.permissions)) throw new Error(`Permissions for command ${name} must be an array`);
		if (info.permissions &amp;&amp; info.permissions.length > 0)
		{
			info.permissions.forEach((perm, index) =>
			{
				try
				{
					bot.resolver.resolvePermission(perm);
				}
				catch (err)
				{
					throw new Error(`Command#${name} permission "${info.permissions[index]}" at ${name}.permissions[${index}] is not a valid permission.\n\n${err}`);
				}
			});
		}
		if (info.roles &amp;&amp; !Array.isArray(info.roles)) throw new Error(`Roles for command ${name} must be an array`);

		/**
		 * Bot instance
		 * @memberof Command
		 * @type {Bot}
		 * @name bot
		 * @instance
		 */
		this.bot = bot;

		/**
		 * The name of the command, used by the dispatcher
		 * to determine the command being executed
		 * @memberof Command
		 * @type {string}
		 * @name name
		 * @instance
		 */
		this.name = info.name;

		/**
		 * A brief description of the command, displayed
		 * in the commands list via the Help command
		 * @memberof Command
		 * @type {string}
		 * @name description
		 * @instance
		 */
		this.description = info.description;

		/**
		 * An example of command usage. The token '&amp;lt;prefix&amp;gt;' will
		 * be replaced by the guild-specific command prefix in the Help command when
		 * 'help &amp;lt;command&amp;gt;' is called
		 * @memberof Command
		 * @type {string}
		 * @name usage
		 * @instance
		 */
		this.usage = info.usage;

		/**
		 * Extra information about the command to be displayed
		 * by the Help command when 'help &amp;lt;command&amp;gt;' is called
		 * @memberof Command
		 * @type {string}
		 * @name extraHelp
		 * @instance
		 */
		this.extraHelp = info.extraHelp;

		/**
		 * The command group that the command belongs to. Allows commands to be
		 * grouped for disabling. The group 'base' cannot be disabled.
		 * @memberof Command
		 * @type {string}
		 * @name group
		 * @instance
		 */
		this.group = info.group;

		/**
		 * Aliases the command can be called by other than its name
		 * @memberof Command
		 * @type {string[]}
		 * @name aliases
		 * @instance
		 */
		this.aliases = info.aliases || [];

		/**
		 * Whether or not a command can only be used within a
		 * guild text channel
		 * @memberof Command
		 * @type {boolean}
		 * @name guildOnly
		 * @instance
		 */
		this.guildOnly = info.guildOnly || false;

		/**
		 * Array of permissions required by the command
		 * caller to be able to execute the command in the guild the command is called in.
		 * See: [PermissionResolvable]{@link http://hydrabolt.github.io/discord.js/#!/docs/tag/master/typedef/PermissionResolvable}
		 * &lt;br>&lt;br>
		 * If any permissions are provided the command's `guildOnly` property will be automatically set to true
		 * @memberof Command
		 * @type {PermissionResolvable[]}
		 * @name permissions
		 * @instance
		 */
		this.permissions = info.permissions || [];

		/**
		 * Array of roles required to use the command. If the command caller
		 * has any of the roles in the array, they will be able to use the command
		 * &lt;br>&lt;br>
		 * If any roles are provided the command's `guildOnly` property will be automatically set to true
		 * @memberof Command
		 * @type {string[]}
		 * @name roles
		 * @instance
		 */
		this.roles = info.roles || [];

		/**
		 * Whether or not the command can be used by the bot owner(s).
		 * &lt;br>&lt;br>
		 * (See: [Bot constructor options.config.owner]{@link Bot})
		 * @memberof Command
		 * @type {boolean}
		 * @name ownerOnly
		 * @instance
		 */
		this.ownerOnly = info.ownerOnly || false;

		// Default guildOnly to true if permissions/roles are given
		if (this.permissions.length > 0 || this.roles.length > 0) this.guildOnly = true;
	}

	/**
	 * Action to be executed when the command is called
	 * @memberof Command
	 * @method action
	 * @instance
	 */
	async action()
	{
		throw new Error(`${this.constructor.name} has not overloaded the command action method`);
	}

	/**
	 * Assert {@link Command#action} is typeof Function, finishing the
	 * command creation process.&lt;br>Called by {@link CommandRegistry#register}
	 * @memberof Command
	 * @method register
	 * @instance
	 */
	register()
	{
		let name = this.constructor.name;
		if (!this.action) throw new Error(`Command#${name}.action: expected Function, got: ${typeof this.action}`);
		if (!this.action instanceof Function) throw new Error(`Command#${name}.action: expected Function, got: ${typeof this.action}`);
	}
}

/**
 * @typedef {Object} CommandInfo - Object containing required {@link Command} properties
 * to be passed to a Command on construction
 * @memberof Command
 * @property {string} name - See: {@link Command#name}
 * @property {string} description - See: {@link Command#description}
 * @property {string} usage - See: {@link Command#usage}
 * @property {string} extraHelp - See: {@link Command#extraHelp}
 * @property {string} group - See: {@link Command#group}
 * @property {string[]} [aliases=[]] - See: {@link Command#aliases}
 * @property {boolean} [guildOnly=false] - See: {@link Command#guildOnly}
 * @property {PermissionResolvable[]} [permissions=[]] - See: {@link Command#permissions}
 * @property {string[]} [roles=[]] - See: {@link Command#roles}
 * @property {boolean} [ownerOnly=false] - See: {@link Command#ownerOnly}
 */
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.2</a> on Fri Oct 07 2016 20:43:55 GMT-0500 (Central Daylight Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
